<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip">
    <head>
        <meta http-equiv="Content-Type" content="text/html; CHARSET=utf-8"></meta>
        <meta name="save" content="history"></meta>
        <title>6 Appendix A: Product Behavior</title>
        <xml>
            <mshelp:toctitle title="6 Appendix A: Product Behavior"></mshelp:toctitle>
            <mshelp:rltitle title="[MS-UCODEREF]: Appendix A: Product Behavior"></mshelp:rltitle>
            <mshelp:keyword index="A" term="a6d86942-eaf6-44c6-8afd-1603b3f4f0aa"></mshelp:keyword>
            <mshelp:attr name="DCSext.ContentType" value="open specification"></mshelp:attr>
            <mshelp:attr name="AssetID" value="a6d86942-eaf6-44c6-8afd-1603b3f4f0aa"></mshelp:attr>
            <mshelp:attr name="TopicType" value="kbRef"></mshelp:attr>
            <mshelp:attr name="DCSext.Title" value="[MS-UCODEREF]: Appendix A: Product Behavior" />
        </xml>
    </head>
    <body>
        <div id="header">
            <h1 class="heading">6 Appendix A: Product Behavior</h1>
        </div>
        <div id="mainSection">
            <div id="mainBody">
                <div id="allHistory" class="saveHistory"></div>
                <div id="sectionSection0" class="section" name="collapseableSection">
                    

<p>The information in this specification is applicable to the
following Microsoft products or supplemental software. References to product
versions include released service packs.</p>

<ul><li><p><span><span> 
</span></span>Windows NT operating system</p>

</li><li><p><span><span> 
</span></span>Windows 2000 operating system</p>

</li><li><p><span><span> 
</span></span>Windows XP operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2003 operating system</p>

</li><li><p><span><span> 
</span></span>Windows Vista operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2008 operating system</p>

</li><li><p><span><span> 
</span></span>Windows 7 operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2008 R2 operating system</p>

</li><li><p><span><span> 
</span></span>Windows 8 operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2012 operating system</p>

</li><li><p><span><span> 
</span></span>Windows 8.1 operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2012 R2 operating system</p>

</li><li><p><span><span> 
</span></span>Windows 10 operating system</p>

</li><li><p><span><span> 
</span></span>Windows Server 2016 operating system </p>

</li><li><p><span><span> 
</span></span>Windows Server operating system </p>

</li></ul><p>Exceptions, if any, are noted in this section. If an update
version, service pack or Knowledge Base (KB) number appears with a product
name, the behavior changed in that update. The new behavior also applies to
subsequent updates unless otherwise specified. If a product edition appears
with the product version, behavior is different in that product edition.</p>

<p>Unless otherwise specified, any statement of optional
behavior in this specification that is prescribed using the terms
&quot;SHOULD&quot; or &quot;SHOULD NOT&quot; implies product behavior in
accordance with the SHOULD or SHOULD NOT prescription. Unless otherwise
specified, the term &quot;MAY&quot; implies that the product does not follow
the prescription.</p>

<p><a id="Appendix_A_1"></a><a href="227922dc-ca6e-4ed0-9347-0a4410d65ba4.md#Appendix_A_Target_1">&lt;1&gt;
Section 3.1.5.2.3</a>: Only Windows NT, Windows 2000, Windows XP, Windows
Server 2003, Windows Vista, Windows Server 2008, Windows 7, and Windows Server
2008 R2 use record count for DEFAULT.</p>

<p><a id="Appendix_A_2"></a><a href="227922dc-ca6e-4ed0-9347-0a4410d65ba4.md#Appendix_A_Target_2">&lt;2&gt;
Section 3.1.5.2.3</a>: An LCID is used in Windows NT, Windows 2000, Windows XP,
Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7, and Windows
Server 2008 R2.</p>

<p><a id="Appendix_A_3"></a><a href="226ad305-8a0b-469e-b30d-630c931faad2.md#Appendix_A_Target_3">&lt;3&gt;
Section 3.1.5.2.3.1</a>: The files in the download map to specific Windows
versions as follows:</p>

<table>
 <thead>
  <tr>
   <th>
   <p>Version</p>
   </th>
   <th>
   <p>File Name</p>
   </th>
  </tr>
 </thead>
 <tr>
  <td>
  <p>Windows NT 4.0 operating system, Windows 2000, Windows
  XP, and Windows Server 2003</p>
  </td>
  <td>
  <p>Windows NT 4.0 through Windows Server 2003 Sorting
  Weight Table.txt</p>
  </td>
 </tr>
 <tr>
  <td>
  <p>Windows Vista</p>
  </td>
  <td>
  <p>Windows Vista Sorting Weight Table.txt</p>
  </td>
 </tr>
 <tr>
  <td>
  <p>Windows Server 2008 </p>
  </td>
  <td>
  <p>Windows Server 2008 Sorting Weight Table.txt</p>
  </td>
 </tr>
 <tr>
  <td>
  <p>Windows 7 and Windows Server 2008 R2 </p>
  </td>
  <td>
  <p>Windows 7 and Windows Server 2008 R2 Sorting Weight
  Table.txt</p>
  </td>
 </tr>
 <tr>
  <td>
  <p>Windows 8, Windows 8.1, Windows Server 2012, and
  Windows Server 2012 R2 </p>
  </td>
  <td>
  <p>Windows 8 and Windows Server 2012 Sorting Weight
  Table.txt<br>
  Windows 8 Upper Case Mapping Table.txt</p>
  </td>
 </tr>
 <tr>
  <td>
  <p>Windows 10, Windows Server 2016, and Windows Server
  operating system </p>
  </td>
  <td>
  <p>Windows 10 Sorting Weight Table.txt</p>
  </td>
 </tr>
</table>

<p> </p>

<p><a id="Appendix_A_4"></a><a href="6de3cdf6-3550-4847-a707-e4aaf0df2894.md#Appendix_A_Target_4">&lt;4&gt;
Section 3.1.5.2.16</a>: The following MapOldHangulSortKey algorithm is only
used in Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows
Vista, Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<dl>
<dd>
<div><pre> COMMENT MapOldHangulSortKey
 COMMENT
 COMMENT  On Entry:  SourceString   - Unicode String to test
 COMMENT             SourceIndex    - Index of leading Jamo to start 
 COMMENT                              from
 COMMENT             SortLocale     - Locale to use for linguistic
 COMMENT                              sort data
 COMMENT             UnicodeWeights - String to store any Unicode
 COMMENT                              weight found
 COMMENT                              for this character(s)
 COMMENT
 COMMENT  On Exit:   CharactersRead - Number of old Hangul found 
 COMMENT             UnicodeWeights - Any Unicode weights found are 
 COMMENT                              appended
 COMMENT
  
 PROCEDURE MapOldHangulSortKey(IN SourceString : Unicode String,
                    IN SourceIndex : 32 bit integer,
                    IN SortLocale : LCID,
                    IN OUTUnicodeWeights : String of UnicodeWeightType,
                    IN IsKoreanLocale : Boolean,
                    OUT CharactersRead : 32 bit integer)
  
 SET CurrentIndex to SourceIndex
 SET JamoSortInfo to empty JamoSortInfoType
  
 // Get any Old Hangul Leading Jamo composition for our Leading Jamo
 SET JamoClass to CALL GetJamoComposition WITH (SourceString,
                 SourceIndex, &quot;Leading Jamo Class&quot;, JamoSortInfo)
  
 IF JamoClass is equal to &quot;Vowel Jamo Class&quot; THEN
     // A Vowel Jamo, try to find an  
     // Old Hangul Vowel Jamo composition.
     SET JamoClass to CALL GetJamoComposition WITH (SourceString,
                 SourceIndex, &quot;Vowel Jamo Class&quot;, JamoSortInfo)
 ENDIF
  
 IF JamoClass is equal to &quot;Trailing Jamo Class&quot; THEN
     // A Trailing Jamo, try to find an 
     // Old Hangul Trailing Jamo composition.
     SET JamoClass CALL GetJamoComposition WITH (SourceString,
                 SourceIndex, &quot;Trailing Jamo Class&quot;, JamoSortInfo)
 ENDIF
  
 // A valid leading and vowel sequence and this is 
 // old Hangul...
 IF JamoSortInfo.OldHangulFlag is true THEN
  
     // Compute the modern hangul syllable prior to this composition
     // Users formula from Unicode 3.0 Section 3.11 p54
     // &quot;Hangul Syllable Composition&quot;
     // This converts a U+11.. sequence to a U+AC00 character
  
     SET ModernHangul to (JamoSortInfo.LeadingIndex *
                NLS_JAMO_VOWELCOUNT + JamoSortInfo.VowelIndex) *
                NLS_JAMO_TRAILING_COUNT + JamoSortInfo.TrailingIndex +
                NLS_HANGUL_FIRST_SYLLABLE
  
     IF JamoSortInfo.FillerUsed is true THEN
         // If the filler is used, sort before the modern Hangul, 
         // instead of after
         DECREMENT ModernHangul
  
         // If falling off the modern Hangul syllable block...
         IF ModernHangul is less than NLS_HANGUL_FIRST_SYLLABLE THEN
             // Sort after the previous character
             // (Circled Hangul Kiyeok A)
            SET ModernHangul to 0x326e
         ENDIF
  
         // Shift the leading weight past any old Hangul
         // that sorts after this modern Hangul
         SET JamoSortInfo.LeadingWeight to
             JamoSortInfo.LeadingWeight + 0x80
     ENDIF
  
     // Store the weights
     SET CharacterWeight to CALL GetCharacterWeights WITH (ModernHangul)
     SET UnicodeWeight to CALL CorrectUnicodeWeight
             WITH (CharacterWeight, IsKoreanLocale)
     APPEND UnicodeWeight to UnicodeWeights
  
     // Add additional weights
     SET UnicodeWeight to CALL MakeUnicodeWeight WITH 
             (ScriptMember_Extra_UnicodeWeight,
              JamoSortInfo.LeadingWeight, false)
     APPEND UnicodeWeight to UnicodeWeights
  
     SET UnicodeWeight to CALL MakeUnicodeWeight WITH
             (ScriptMember_Extra_UnicodeWeight,
              JamoSortInfo.VowelWeight, false)
  
     APPEND UnicodeWeight to UnicodeWeights
     SET UnicodeWeight to CALL MakeUnicodeWeight WITH 
             (ScriptMember_Extra_UnicodeWeight,
              JamoSortInfo.TrailingWeight, false)
  
     APPEND UnicodeWeight to UnicodeWeights
  
     // Return the characters consumed
     SET CharactersRead to CurrentIndex - SourceIndex
     RETURN CharactersRead
 ENDIF
  
 // Otherwise it isn't a valid old Hangul composition
 // and don't do anything with it
  
 SET CharactersRead to 0
 RETURN CharactersRead
</pre></div>
</dd></dl>

<p><a id="Appendix_A_5"></a><a href="78555b0f-0e4e-4cda-93c7-b3b52a20273f.md#Appendix_A_Target_5">&lt;5&gt;
Section 3.1.5.2.17</a>: The GetJamoComposition algorithm is only used in
Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista,
Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_6"></a><a href="e1d75ba2-e4eb-4ce1-9c96-9df6db67c25a.md#Appendix_A_Target_6">&lt;6&gt;
Section 3.1.5.2.18</a>: The following GetJamoStateData algorithm is only used
in Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista,
Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<dl>
<dd>
<div><pre> COMMENT GetJamoStateData
 COMMENT
 COMMENT  On Entry:  Character     - Unicode Character to get Jamo 
 COMMENT                             information for
 COMMENT 
 COMMENT  On Exit:   JamoStateData - Jamo state information from 
 COMMENT                             the data file
 COMMENT
 COMMENT  Jamo State information looks like this in the database:
 COMMENT
 COMMENT   SORTTABLES
 COMMENT     ...
 COMMENT     JAMOSORT395
 COMMENT     ...
 COMMENT   0x11724 
 COMMENT     0x1172 0x00 0x00 0x11 0x00 0x380x03; U+1172 
 COMMENT     0x1161 0x01 0x00 0x00 0x00 0x000x01; U+1172,1161 
 COMMENT     0x1175 0x01 0x00 0x11 0x1b 0x3a0x00; U+1172,1161,1175 
 COMMENT     0x1169 0x01 0x00 0x11 0x1b 0x3f0x00; U+1172,1169
  
 PROCEDURE GetJamoStateData (IN Character : Unicode Character,
                             OUT JamoStateData : JamoStateDateType)
  
 // Get the Jamo section for this character.
 // If Character was 0x1172, this would access the following section:
 // 0x11724 
 //    0x1172 0x00 0x00 0x11 0x00 0x38 0x03 ; U+1172           record 0
 //    0x1161 0x01 0x00 0x00 0x00 0x00 0x01 ; U+1172,1161      record 1
 //    0x1175 0x01 0x00 0x11 0x1b 0x3a 0x00 ; U+1172,1161,1175 record 2
 //    0x1169 0x01 0x00 0x11 0x1b 0x3f 0x00 ; U+1172,1169      record 3
 //    |     |    |    |    |    |    |       |
 // Field 1  2    3    4    5    6    7       Comment
  
 OPEN SECTION JamoSection
      where name is SORTTABLES\JAMOSORT\[Character] from unisort.txt
  
 // Now open the first record
 SELECT RECORD JamoRecord FROM JamoSection WHERE record index is 0
  
 // Now gather the information from that record.
 SET JamoStateData.OldHangulFlag   to JamoRecord.Field2
 SET JamoStateData.LeadingIndex    to JamoRecord.Field3
 SET JamoStateData.VowelIndex      to JamoRecord.Field4
 SET JamoStateData.TrailingIndex   to JamoRecord.Field5
 SET JamoStateData.ExtraWeight     to JamoRecord.Field6
 SET JamoStateData.TransitionCount to JamoRecord.Field7
  
 // Remember the record
 SET JamoStateData.DataRecord to JamoRecord
  
 RETURN JamoStateData
</pre></div>
</dd></dl>

<p><a id="Appendix_A_7"></a><a href="e0783685-ff5d-4671-ac57-d021ee52d8b2.md#Appendix_A_Target_7">&lt;7&gt;
Section 3.1.5.2.19</a>: The FindNewJamoState algorithm is only used in Windows
NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows
Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_8"></a><a href="83bde033-b22b-4c28-babe-c729774b85e7.md#Appendix_A_Target_8">&lt;8&gt;
Section 3.1.5.2.20</a>: The following UpdateJamoSortInfo algorithm is only used
in Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista,
Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<dl>
<dd>
<div><pre> COMMENT UpdateJamoSortInfo
 COMMENT
 COMMENT  On Entry:  JamoClass     - The current Jamo Class
 COMMENT             JamoStateData - Information about the new
 COMMENT                             character state
 COMMENT             JamoSortInfo  - Information about the character
 COMMENT                             state
 COMMENT
 COMMENT  On Exit:   JamoSortInfo  - Updated with information about
 COMMENT                             the new state based on JamoClass
 COMMENT                             and JamoSortData
 COMMENT
  
 PROCEDURE UpdateJamoSortInfo(IN JamoClass : enumeration,
                              IN JamoStateData : JamoStateDataType,
                              INOUT JamoSortInfo : JamoSortInfoType)
  
 // Record if this is a Jamo unique to old Hangul
 SET JamoSortInfo.OldHangulFlag to
     JamoSortInfo.OldHangulFlag | JamoStateData.OldHangulFlag
  
 //  Update the indices if the new ones are higher than the current
 //  ones.
 IF JamoStateData.LeadingIndex
    is greater than JamoSortInfo.LeadingIndex THEN
    SET JamoSortInfo.LeadingIndex to JamoStateData.LeadingIndex;
 ENDIF
  
 IF JamoStateData.VowelIndex
    is greater than JamoSortInfo.VowelIndex THEN
    SET JamoSortInfo.VowelIndex to JamoStateData.VowelIndex;
 ENDIF
  
 IF JamoStateData.TrailingIndex
    is greater than JamoSortInfo.TrailingIndex THEN
    SET JamoSortInfo.TrailingIndex to JamoStateData.TrailingIndex;
 ENDIF
  
 //  Update the extra weights according to the current Jamo class.
 CASE JamoClass OF
    &quot;Leading Jamo Class&quot;:
       IF JamoStateData.ExtraWeight
          is greater than JamoSortInfo.LeadingWeight THEN
          SET JamoSortInfo.LeadingWeight to JamoStateData.ExtraWeight
       ENDIF
  
    &quot;Vowel Jamo Class&quot;:
       IF JamoStateData.ExtraWeight
          is greater than JamoSortInfo.VowelWeight THEN
          SET JamoSortInfo.VowelWeight to JamoStateData.ExtraWeight
       ENDIF
  
    &quot;Trailing Jamo Class&quot;:
    IF JamoStateData.ExtraWeight
       is greater than JamoSortInfo.TrailingWeight THEN
       SET JamoSortInfo.TrailingWeight to JamoStateData.ExtraWeight
    ENDIF
 ENDCASE
  
 RETURN JamoSortInfo
</pre></div>
</dd></dl>

<p><a id="Appendix_A_9"></a><a href="d27ff90a-34a2-40ff-87a2-957ffa3cf255.md#Appendix_A_Target_9">&lt;9&gt;
Section 3.1.5.2.21</a>: The IsJamo algorithm is only used in Windows NT,
Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows Server
2008, Windows 7, and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_10"></a><a href="682a41ad-bb0e-47b7-86b4-dca51574faf7.md#Appendix_A_Target_10">&lt;10&gt;
Section 3.1.5.2.22</a>: The IsCombiningJamo algorithm is not used in Windows
NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows
Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_11"></a><a href="fcbb4e93-135e-4d17-987f-f59b6e638fcd.md#Appendix_A_Target_11">&lt;11&gt;
Section 3.1.5.2.23</a>: The following IsJamoLeading algorithm is only used in
Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista,
Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<dl>
<dd>
<div><pre> COMMENT IsJamoLeading 
 COMMENT
 COMMENT  On Entry:  SourceCharacter - Unicode Character to test
 COMMENT
 COMMENT  On Exit:   Result          - true if SourceCharacter is a
 COMMENT                               leading Jamo
 COMMENT
 COMMENT NOTE: Only call this if the character is known to be a Jamo
 COMMENT       syllable. This function only helps distinguish between
 COMMENT       the different types of Jamo, so only call it if
 COMMENT       IsJamo() has returned true.
 COMMENT
  
 PROCEDURE IsJamoLeading(IN SourceCharacter : Unicode Character,
                         OUT Result: boolean)
  
 IF SourceCharacter is less than NLS_CHAR_FIRST_VOWEL_JAMO THEN
      SET Result to true
 ELSE
      SET Result to false
 ENDIF
  
 RETURN Result
</pre></div>
</dd></dl>

<p><a id="Appendix_A_12"></a><a href="2eaa7153-e51b-4229-910e-dc90cd1560d8.md#Appendix_A_Target_12">&lt;12&gt;
Section 3.1.5.2.24</a>: The IsJamoVowel algorithm is not applicable to Windows
NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows
Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_13"></a><a href="78e208c9-d643-49a2-8f3d-e2609e6ca08d.md#Appendix_A_Target_13">&lt;13&gt;
Section 3.1.5.2.25</a>: The following IsJamoTrailing algorithm is only used in
Windows NT, Windows 2000, Windows XP, Windows Server 2003, Windows Vista,
Windows Server 2008, Windows 7, and Windows Server 2008 R2.</p>

<dl>
<dd>
<div><pre> COMMENT IsJamoTrailing
 COMMENT
 COMMENT  On Entry:  SourceCharacter - Unicode Character to test
 COMMENT
 COMMENT  On Exit:   Result          - true if this is a trailing Jamo
 COMMENT
 COMMENT NOTE: Only call this if the character is known to be a Jamo
 COMMENT       syllable. This function only helps distinguish between
 COMMENT       the different types of Jamo, so only call it if
 COMMENT       IsJamo() has returned true.
 COMMENT
  
 PROCEDURE IsJamoTrailing(IN SourceCharacter : Unicode Character,
                          OUT Result: boolean)
  
 IF SourceCharacter is greater than
    or equal to NLS_CHAR_FIRST_VOWEL_JAMO THEN
      SET Result to true
 ELSE
      SET Result to false
 ENDIF
  
 RETURN Result
</pre></div>
</dd></dl>

<p><a id="Appendix_A_14"></a><a href="7d326d1d-cf6d-4ca3-b175-b6f15ae1d102.md#Appendix_A_Target_14">&lt;14&gt;
Section 3.1.5.4</a>: The IdnToNameprepUnicode, IdnToAscii, and IdnToUnicode
algorithms are not applicable to Windows NT, Windows 2000, Windows XP, or
Windows Server 2003. These algorithms follow the <a href="484e8ed3-152b-4300-9527-7efade6d6491.md#gt_317d6274-96a4-4e70-bb5b-f48bcc5c13a2">IDNA2003</a> standards for
Windows Vista, Windows Server 2008, Windows 7, and Windows Server 2008 R2
operating system. Otherwise, the algorithms follow the <a href="484e8ed3-152b-4300-9527-7efade6d6491.md#gt_e13de1ef-405f-4d67-9a0c-98366eeac0d2">IDNA2008+UTS46</a> standards.</p>

<p><a id="Appendix_A_15"></a><a href="5e049061-a870-44f6-abd7-f5387f66b73f.md#Appendix_A_Target_15">&lt;15&gt;
Section 3.1.5.4.6</a>: This version is not used in Windows NT, Windows 2000,
Windows XP, Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7,
and Windows Server 2008 R2.</p>

<p><a id="Appendix_A_16"></a><a href="16ed39af-8ea7-4dc2-8d0f-7dff7535d681.md#Appendix_A_Target_16">&lt;16&gt;
Section 3.1.5.4.7</a>: This version is used in Windows Vista, Windows Server
2008, Windows 7, and Windows Server 2008 R2</p>


                </div>
            </div>
        </div>
    </body>
</html>